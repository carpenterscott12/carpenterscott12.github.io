<!DOCTYPE html>

<head>
    <link rel="stylesheet" type="text/css" href="shared.css" />
</head>

<body>
    

</body>
<style>

</style>

<script>

    // Globals
    let deck = null;
    

    // There should not be a reason to access index 0 or 1, but other indices correspond to card ranks in order of strength.
    const rankStrings = ["", "", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"];

    const suitStrings = ["♠", "♥", "♣", "♦"];

    // Enums
    const Suit = {
        Spade: 0,
        Heart: 1,
        Club: 2,
        Diamond: 3
    }

    // Classes
    class HtmlDiv {
        constructor(divId, defaultInnerHtml) {
            this._divId = divId;
            this._element = document.getElementById(divId);
            // Make defaultInnerHtml optional param
            if (defaultInnerHtml !== undefined) {
                this._element.innerHTML = defaultInnerHtml;
            }
        }

        hide() {
            this._element.style.display = "none";
        }

        showBlock() {
            this._element.style.display = "block";
        }

        showInlineBlock() {
            this._element.style.display = "inline-block";
        }

        setInnerHtml(input) {
            this._element.innerHTML = input;
        }

        setColorRed() {
            this._element.style.color = "red";
        }

        setColorBlack() {
            this._element.style.color = "black";
        }

        setColorGreen() {
            this._element.style.color = "#03DAC6";
        }

        setColorWhite() {
            this._element.style.color = "#FFFFFF";
        }

        setBackgroundGray() {
            this._element.style.backgroundColor = "#424242";
        }

        setBackgroundWhite() {
            this._element.style.backgroundColor = "#FFFFFF";
        }

        setClassName(inputClassName) {
            this._element.className = inputClassName;
        }
    }

    class HtmlInput {
        constructor(inputId, val) {
            this._inputId = inputId;
            this._element = document.getElementById(inputId);
            // Make val optional param
            if (val !== undefined) {
                this._element.value = val;
            }
        }

        hide() {
            this._element.style.display = "none";
        }

        showBlock() {
            this._element.style.display = "block";
        }

        showInlineBlock() {
            this._element.style.display = "inline-block";
        }

        getValue() {
            return this._element.value;
        }

        setValue(val) {
            this._element.value = val;
        }

        setColorRed() {
            this._element.style.color = "red";
        }

        setColorBlack() {
            this._element.style.color = "black";
        }
    }

    class CardWithHtmlInput {
        constructor(card, htmlInput) {
            this._card = card;
            this._htmlInput = htmlInput;
            this._htmlInput.showInlineBlock();
            this._handlingClick = false;
        }

        setHandlingClick(input) {
            this._handlingClick = input;
        }
    }

    class Card {
        constructor(rank, suit) {
            this._rank = rank;
            this._suit = suit;
        }

        getString() {
            return rankStrings[this._rank] + suitStrings[this._suit];
        }

        isRed() {
            return (this._suit === Suit.Heart || this._suit === Suit.Diamond);
        }

        isBlack() {
            return (this._suit === Suit.Spade || this._suit === Suit.Club);
        }
    }

    class Deck {
        constructor() {
            this._cards = [];
            this.addAllRanksForSuit(Suit.Spade);
            this.addAllRanksForSuit(Suit.Heart);
            this.addAllRanksForSuit(Suit.Diamond);
            this.addAllRanksForSuit(Suit.Club);
            this.shuffle();
        }

        addAllRanksForSuit(suit) {
            let i = 0;
            for (i = 0; i < 13; i++) {
                let newCard = new Card(i + 2, suit);
                this._cards.push(newCard);
            }
        }

        shuffle() {
            for (let i = this._cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [this._cards[i], this._cards[j]] = [this._cards[j], this._cards[i]];
            }
        }

        draw() {
            if (this._cards.length > 0) {
                return this._cards.shift();
            }
            else {
                console.log("Deck was empty when trying to draw.");
                return null;
            }
        }
    }



    function startGame() {
        
    }

    function resetGame() {
        
    }


    function sleep(milliseconds) {
        return new Promise(resolve => setTimeout(resolve, milliseconds));
    }

    // Main game:
    startGame();


</script>

</html>